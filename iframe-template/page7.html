<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes">
  <title>Page 8</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rethink+Sans:ital,wght@0,400..800;1,400..800&family=Special+Elite&family=Bebas+Neue&display=swap" rel="stylesheet">

  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      min-height: 100vh;
    }

    body {
      margin: 0;
      font-family: 'Special Elite', cursive;
      position: relative;
      overflow: hidden;
    }

    #bg-layer {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url("page 8 bg.jpg") center center / cover no-repeat;
      z-index: 0;
      transition: filter 0.3s ease;
    }

    #bg-layer.blurred {
      filter: blur(5px);
      pointer-events: none;
      user-select: none;
    }

    #page-content {
      position: fixed;
      inset: 0;
      z-index: 1;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 20px;
      box-sizing: border-box;
      font-family: 'Rethink Sans', sans-serif;
      color: #f5f5f5;
    }

    #page-content.blurred {
      filter: blur(5px);
      pointer-events: none;
      user-select: none;
      transition: filter 0.3s ease;
    }

    #instructions-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: rgba(0, 0, 0, 0.20);
      display: none;
      justify-content: center;
      align-items: center;
      z-index: 1000;
      pointer-events: auto;
    }

    #instructions-overlay.show {
      display: flex;
    }

    .overlay-content {
      background: url("instructions-card.png") center/contain no-repeat;
      width: 450px;
      min-height: 500px;
      padding: 10px 48px 10px;
      font-family: 'Special Elite', cursive;
      position: relative;
    }

    .instructions-title {
      margin: 0;
      font-family: 'Special Elite', cursive;
      letter-spacing: 2px;
      font-size: 19px;
      color: rgb(255, 255, 255);
      position: absolute;
      top: 143px;
      left: 0;
      right: 0;
      text-align: center;
      font-weight: bold;
    }

    .instructions-body {
      position: absolute;
      top: 220px;
      left: 117px;
      right: 40px;
    }

    .instructions-body p {
      margin: 0 0 12px;
      font-size: 16px;
      line-height: 1.3;
      color: rgb(56, 4, 4);
    }

    .overlay-close {
      position: absolute;
      top: 50px;
      right: 12px;
      background: rgba(0, 0, 0, 0.4);
      border: 1px solid rgba(255, 255, 255, 0.3);
      color: #ffffff;
      font-size: 30px;
      cursor: pointer;
      width: 30px;
      height: 30px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      line-height: 1;
      z-index: 1;
    }

    /* Drop zones */
    .drop-zone {
      position: absolute;
      width: 155px;
      height: 168px;
      border-radius: 12px;
      background-color: rgba(97, 0, 0, 0.2);
      transition: all 0.3s ease;
    }

    .drop-zone1 {
      top: 200px;
      left: 380px;
    }

    .drop-zone2 {
      top: 201px;
      left: 575px;
    }

    .drop-zone3 {
      top: 200px;
      left: 760px;
    }

    .drop-zone.hover {
      background-color: rgba(245, 215, 176, 0.2);
    }

    /* Rectangles */
    .rectangle1 {
      position: absolute;
      top: 153px;
      left: 76px;
      width: 150px;
      height: 45px;
      background-color: rgb(218, 188, 148); 
      border-radius: 9px;
      background-image: url("page 8 text.jpg");
      background-size: cover;  
      background-position: center; 
      background-repeat: no-repeat; 
      display: flex;
      align-items: center;
      padding: 0 12px;
    }
      
    .rectangle1 .text1 {
      color: rgb(0, 0, 0);
      font-size: 13px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      z-index: 10;         
      margin: 0;
    }

    .rectangle2 {
      position: absolute;
      top: 230px;
      left: 85px;
      width: 150px;
      height: 45px;
      background-color: rgb(218, 188, 148); 
      border-radius: 9px;
      background-image: url("page 8 text.jpg");
      background-size: cover;  
      background-position: center; 
      background-repeat: no-repeat;
      display: flex;
      align-items: center;
      padding: 0 12px;
    }

    .rectangle2 .text2 {
      color: rgb(0, 0, 0);
      font-size: 13px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      z-index: 10;
      margin: 0;
    }

    .rectangle3 {
      position: absolute;
      top: 310px;
      left: 65px;
      width: 150px;
      height: 50px;
      background-color: rgb(218, 188, 148); 
      border-radius: 9px;
      background-image: url("page 8 text.jpg");
      background-size: cover;  
      background-position: center; 
      background-repeat: no-repeat;
      display: flex;
      align-items: center;
      padding: 0 12px;
    }

    .rectangle3 .text3 {
      color: rgb(0, 0, 0);
      font-size: 13px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      z-index: 10;
      margin: 0;
    }

    .rectangle4 {
      position: absolute;
      top: 388px;
      left: 80px;
      width: 150px;
      height: 50px;
      background-color: rgb(218, 188, 148); 
      border-radius: 9px;
      background-image: url("page 8 text.jpg");
      background-size: cover;  
      background-position: center; 
      background-repeat: no-repeat;
      display: flex;
      align-items: center;
      padding: 0 12px;
    }

    .rectangle4 .text4 {
      color: rgb(0, 0, 0);
      font-size: 13px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      z-index: 10;
      margin: 0;
    }

    #page-content .drop1 {
      color: rgb(218, 188, 148);
      position: absolute;
      top: 255px;   
      left: 394px;   
      font-size: 13px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      font-style: italic;
    }

    #page-content .drop2 {
      color: rgb(218, 188, 148);
      position: absolute;
      top: 255px;   
      left: 590px;   
      font-size: 13px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      font-style: italic;
    }

    #page-content .drop3 {
      color: rgb(218, 188, 148);
      position: absolute;
      top: 255px;   
      left: 778px;   
      font-size: 13px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      font-style: italic;
    }

    #page-content .safe1 {
      color: rgb(245, 215, 176);
      position: absolute;
      top: 137px;   
      left: 409px;   
      font-size: 15px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      font-weight: bold;
    }

    #page-content .sus1 {
      color: rgb(245, 215, 176);
      position: absolute;
      top: 137px;   
      left: 578px;   
      font-size: 15px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      font-weight: bold;
    }

    #page-content .ignore1 {
      color: rgb(245, 215, 176);
      position: absolute;
      top: 135px;   
      left: 815px;   
      font-size: 15px;
      font-family: 'Special Elite', cursive;
      text-align: left;
      font-weight: bold;
    }

    .final-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.65);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 2000;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.6s ease;
    }

    .final-overlay.visible {
      opacity: 1;
      pointer-events: auto;
    }

    .final-box {
      background: url("page 8 final.jpg") center center / cover no-repeat; 
      border-radius: 16px;
      border: 1px solid #ffffff;
      box-shadow: 0 12px 30px rgba(0, 0, 0, 0.45);
      padding: 28px 36px;
      max-width: 90%;
      width: 485px;
      min-height: 180px;
      text-align: center;
      font-family: 'Rethink Sans', sans-serif;
      color: #ffffff;
    }

    .final-box-title {
      font-size: 21px;
      margin: 0 0 10px;
      letter-spacing: 2px;
      text-transform: uppercase;
    }

    .final-box-text {
      margin: 0 0 18px;
      font-size: 14px;
    }

    .final-box-btn {
      padding: 8px 18px;
      border-radius: 20px;
      margin-top: 8px;
      border: 1px solid #380404;
      background-color: #610000;
      color: #f5f5f5;
      font-family: 'Special Elite', cursive;
      cursor: pointer;
      font-size: 13px;
    }

    .final-box-btn:hover {
      background-color: #8B4513;
    }

    .badge-row {
      display: flex;
      justify-content: center;
      align-items: center;   
      margin-bottom: 10px;
    }

    .badge-image {
      object-fit: contain;
      display: block;
    }

    .badge-gold {
      width: 60px;
      height: 60px;        
    }

    .badge-silver {
      width: 52px;
      height: 52px;
    }
  </style>
</head>
<body>
  <div id="bg-layer"></div>

  <div id="instructions-overlay" class="show">
    <div class="overlay-content">
      <button class="overlay-close" id="close-instructions">×</button>
      <h2 class="instructions-title">STAGE 3: CHOOSE YOUR RESPONSE</h2>
      <div class="instructions-body">
        <p>Rookie,</p>
        <p>
          This is your final test.<br>
          Analyse carefully and choose your<br>responses wisely.
        </p>
        <p>
          Pass this assessment to earn<br>the TRUE DETECTIVE badge.
        </p>
      </div>
    </div>
  </div>

  <div id="page-content">
    <!-- Drop zones -->
    <div class="drop-zone drop-zone1"></div>
    <div class="drop-zone drop-zone2"></div>
    <div class="drop-zone drop-zone3"></div>

    <!-- Draggable rectangles with text -->
    <div class="rectangle1">
      <p class="text1">"Hi, do you know when class starts?"</p>
    </div>
    <div class="rectangle2">
      <p class="text2">"Let's move to another app, it's easier."</p>
    </div>
    <div class="rectangle3">
      <p class="text3">"Send your OTP so I can help you."</p>
    </div>
    <div class="rectangle4">
      <p class="text4">"Send me a photo, I'll delete it after."</p>
    </div>

    <!-- Labels -->
    <p class="drop1">Drop Messages Here</p>
    <p class="drop2">Drop Messages Here</p>
    <p class="drop3">Drop Messages Here</p>
    <p class="safe1">Safe to Reply</p>
    <p class="sus1">Suspicious / Risky</p>
    <p class="ignore1">Ignore</p>
  </div>

  <!-- Final Overlay -->
  <div class="final-overlay" id="final-overlay">
    <div class="final-box">
      <div class="badge-row">
        <img src="golden star.png" alt="Gold Badge" class="badge-image badge-gold">
        <img src="golden star.png" alt="Gold Badge" class="badge-image badge-gold">
        <img src="golden star.png" alt="Gold Badge" class="badge-image badge-gold">
      </div>
      <h2 class="final-box-title">Congratulations!</h2>
      <p class="final-box-text">You've earned the TRUE DETECTIVE badge!</p>
      <button class="final-box-btn" id="continue-btn">Continue</button>
    </div>
  </div>

  <script>
    // Define correct answers for each rectangle
    const correctAnswers = {
      'rectangle1': 'safe',
      'rectangle2': 'suspicious',
      'rectangle3': 'suspicious',
      'rectangle4': 'ignore'
    };

    const rectangles = document.querySelectorAll('.rectangle1, .rectangle2, .rectangle3, .rectangle4');
    const dropZones = document.querySelectorAll('.drop-zone');
    let correctCount = 0;

    // Check if rectangle overlaps with drop zone
    function isOverlapping(rect, zone) {
      const rectBounds = rect.getBoundingClientRect();
      const zoneBounds = zone.getBoundingClientRect();
      
      return !(rectBounds.right < zoneBounds.left || 
               rectBounds.left > zoneBounds.right || 
               rectBounds.bottom < zoneBounds.top || 
               rectBounds.top > zoneBounds.bottom);
    }

    // Check which zone the rectangle is in
    function checkDrop(rect) {
      let droppedZone = null;
      
      dropZones.forEach((zone, index) => {
        if (isOverlapping(rect, zone)) {
          droppedZone = index === 0 ? 'safe' : index === 1 ? 'suspicious' : 'ignore';
          zone.classList.add('hover');
        } else {
          zone.classList.remove('hover');
        }
      });
      
      return droppedZone;
    }

    // Show final overlay
    function showFinalOverlay() {
      const finalOverlay = document.getElementById('final-overlay');
      finalOverlay.classList.add('visible');
    }

    // Make rectangles draggable
    rectangles.forEach((rect, index) => {
      let isDragging = false;
      let offsetX, offsetY;
      const rectClass = rect.className.split(' ')[0];

      rect.style.cursor = 'grab';

      rect.addEventListener('mousedown', (e) => {
        isDragging = true;
        rect.style.cursor = 'grabbing';
        offsetX = e.clientX - rect.getBoundingClientRect().left;
        offsetY = e.clientY - rect.getBoundingClientRect().top;
        rect.style.zIndex = 1000;
      });

      document.addEventListener('mousemove', (e) => {
        if (isDragging) {
          let newX = e.clientX - offsetX;
          let newY = e.clientY - offsetY;
          rect.style.left = newX + 'px';
          rect.style.top = newY + 'px';
          
          checkDrop(rect);
        }
      });

      document.addEventListener('mouseup', () => {
        if (isDragging) {
          isDragging = false;
          rect.style.cursor = 'grab';
          rect.style.zIndex = 1;
          
          const droppedZone = checkDrop(rect);
          
          if (droppedZone) {
            // Check if answer is correct
            if (droppedZone === correctAnswers[rectClass]) {
              // CORRECT: Hide rectangle
              rect.style.display = 'none';
              correctCount++;
              
              // Custom messages for each rectangle
              let message = '';
              if (rectClass === 'rectangle1') {
                message = '✅ Great! This is a normal message with no pressure or personal info requested.';
              } else if (rectClass === 'rectangle2') {
                message = '✅ Excellent! Moving to another app is suspicious!';
              } else if (rectClass === 'rectangle3') {
                message = '✅ Perfect! Never share your OTP with anyone!';
              } else if (rectClass === 'rectangle4') {
                message = '✅ Smart choice! Best to ignore this request!';
              }
              
              alert(message);
              
              // Check if all 4 are correct
              if (correctCount === 4) {
                setTimeout(() => {
                  showFinalOverlay();
                }, 500);
              }
            } else {
              // WRONG: Rectangle stays visible with red border
              alert('❌ Wrong answer! Try again.');
              rect.style.border = '3px solid red';
            }
          }
          
          dropZones.forEach(zone => zone.classList.remove('hover'));
        }
      });
    });

    // Overlay functionality
    const bgLayer = document.getElementById('bg-layer');
    const pageContent = document.getElementById('page-content');
    const overlay = document.getElementById('instructions-overlay');
    const closeBtn = document.getElementById('close-instructions');

    overlay.classList.add('show');
    bgLayer.classList.add('blurred');
    pageContent.classList.add('blurred');

    closeBtn.addEventListener('click', () => {
      overlay.classList.remove('show');
      bgLayer.classList.remove('blurred');
      pageContent.classList.remove('blurred');
    });

    overlay.addEventListener('click', (e) => {
      if (e.target === overlay) {
        overlay.classList.remove('show');
        bgLayer.classList.remove('blurred');
        pageContent.classList.remove('blurred');
      }
    });

    // Continue button functionality
    document.getElementById('continue-btn').addEventListener('click', () => {
      window.location.href = 'page8.html'; // Change to your next page
    });
  </script>
</body>
</html>